@using PatientMgmt.Core.Application.ViewModels.TestResults
@model List<PendingTestResultViewModel>
@{
    ViewData["Title"] = "Pending test results";
}
<section class="section">

        <div class="container">

            <form method="post" asp-controller="LabResult" asp-action="Index">

                <div class="field has-addons is-right">
                <div class="control">
                    <input class="input" type="text" name="IdCard" value="@ViewBag.FilterIdCard" placeholder="Find by patient Id">
                </div>
                <div class="control">
                    <button type="submit" class="button is-info is-right">
                    Search
                    </button>
                </div>
                </div>

            </form>

            @if(Model == null || Model.Count == 0)
            {
                @if (ViewBag.IsSearch == true)
            {
                <h3 class="content has-text-centered">No test results found for Id <span class="title is-size-6">@ViewBag.FilterIdCard</span></h3>
            }
            else
            {
                <h3 class="content has-text-centered title is-size-6">No Lab Test available.</h3>
            }
            }
           <div class="columns is-multiline">
                @foreach(PendingTestResultViewModel item in Model){
                    <div class="column is-4-desktop is-6-tablet">
                        <div class="card">
    
                            <div class="card-content mt-4">

                                <div class="content">
                                    <div class="is-flex is-justify-content-center is-align-items-center">
                                    <i class="fa-solid fa-bed mr-2" style="color: #74C0FC; width="18" height="14" viewBox="0 0 18 14" fill="none"></i>
                                    <p class="is-size-6"><span class="has-text-weight-semibold">Patient Name: </span>@item.PatientName</p>
                                    </div>
                                </div>

                                <div class="content">
                                    <div class="is-flex is-justify-content-center is-align-items-center">
                                    <i class="fa-regular fa-id-card mr-2" style="color: #74C0FC; width="18" height="14" viewBox="0 0 18 14" fill="none"></i>
                                    <p class="is-size-6"><span class="has-text-weight-semibold">Patient Id: </span>@item.IdCard</p>
                                    </div>
                                </div>

                                <div class="content">
                                    <div class="is-flex is-justify-content-center is-align-items-center">
                                    <i class="fa-solid fa-flask-vial mr-2" style="color: #74C0FC; width="18" height="14" viewBox="0 0 18 14" fill="none"></i>
                                    <p class="is-size-6"><span class="has-text-weight-semibold">Test Name: </span>@item.TestName</p>
                                    </div>
                                </div>

                                <div class="content">
                                    <div class="is-flex is-justify-content-center is-align-items-center">
                                    <i class="fa-regular fa-clock mr-2" style="color: #ff8f0f; width="18" height="14" viewBox="0 0 18 14" fill="none"></i>
                                    <p class="is-size-6"><span class="has-text-weight-semibold">Test Status: </span>@item.ResultStatus</p>
                                    </div>
                                </div>

                            </div>
                            <div class="card-footer">
                                <div class="card-footer-item">
                                <a asp-controller="LabResult" asp-action="ReportResults" asp-route-id="@item.Id" class="button is-fullwidth has-text-grey-light is-uppercase" style="border: none;" data-config-id="primary-action1">Report result</a>
                                </div>
                            </div>

                        </div>
                    </div>
                }         
            </div>
        </div>
</section>